/**
 * HTTP 请求相关类型定义
 * @module utils/request/type
 */

/**
 * 请求方法类型
 */
export type HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'OPTIONS' | 'HEAD' | 'TRACE' | 'CONNECT'

/**
 * 基础配置
 */
export interface HttpInitOptions {
	/** 基础 URL */
	baseURL : string
	/** 请求头 */
	header ?: UTSJSONObject
	/** 是否显示加载提示 */
	showLoading ?: boolean
	/** 是否自动附加 Token */
	autoAuth ?: boolean
	/** 超时时间（毫秒） */
	timeout ?: number
	/** 其他扩展配置 */
	[key : string] : any
}

/**
 * 请求配置
 */
export interface HttpRequestOptions {
	/** 请求 URL */
	url : string
	/** 请求数据 */
	data ?: UTSJSONObject | null
	/** 请求头 */
	header ?: UTSJSONObject | null
	/** 请求方法 */
	method ?: HttpMethod
	/** 超时时间（毫秒） */
	timeout ?: number
	/** 是否显示加载提示 */
	showLoading ?: boolean
	/** 加载提示文字 */
	loadingText ?: string
	/** 是否禁用自动认证 */
	disableAuth ?: boolean
	/** 其他扩展配置 */
	[key : string] : any
}

/**
 * 响应体结构
 */
export interface ResponseData<T = any> {
	/** 业务状态码 */
	code : number
	/** 提示信息 */
	msg : string
	/** 响应数据 */
	data : T
	/** 数据总数（分页时使用） */
	count : number
}

/**
 * 分页数据响应格式
 */
export interface DataResponse<T = any> {
	/** 数据列表 */
	data : T | []
	/** 数据总数 */
	total ?: number
}

/**
 * HTTP 拦截器接口
 */
export interface HttpInterceptors {
	/** 请求拦截器 */
	request ?: (options : HttpRequestOptions) => HttpRequestOptions
	/** 响应拦截器 */
	response ?: <T>(response : ResponseData<T>, options : HttpRequestOptions) => DataResponse<T> | T
	/** 错误拦截器 */
	error ?: (err : any, options : HttpRequestOptions) => void
}
